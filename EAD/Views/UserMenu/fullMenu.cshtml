@model List<EAD.Models.DailyMenu>
@{
    ViewData["Title"] = "Weekly Menu Schedule";
    var daysOfWeek = new[] { "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday" };
}

<!-- SweetAlert2 -->
<link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
<!-- Google Fonts (Poppins for modern look) -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">

<link href="~/css/fullMenu.css" rel="stylesheet" />

<div class="page-container fade-in">

    <!-- Header with Transparent feel on the purple background -->
    <div class="header-area">
        <h2>Weekly Menu</h2>
      
    </div>
    <a href="/" class="btn-home-corner">
        <i class="bi bi-house-door-fill"></i> Home
    </a>
    <!-- The White Card Container -->
    <div class="menu-shadow-card">
        <div class="table-responsive">
            <table class="mess-table">
                <thead>
                    <tr>
                        <th style="width: 15%">Day</th>
                        <th style="width: 21%">Breakfast</th>
                        <th style="width: 21%">Lunch</th>
                        <th style="width: 21%">Dinner</th>
                        <th style="width: 21%">Snacks</th>
                        <th style="width: 21%">Tea</th>

                    </tr>
                </thead>
                <tbody>
                    @foreach (var day in daysOfWeek)
                    {
                        <tr>
                            <!-- 1. Day Column -->
                            <td class="col-day">
                                <span class="day-text">@day</span>
                            </td>

                            <!-- 2. Meals Columns -->
                            @foreach (var mealType in new[] { "Breakfast", "Lunch", "Dinner", "Snack","Tea" })
                            {
                                var meals = Model.Where(m => m.DayOfWeek == day && m.MealType == mealType).ToList();

                                <td>
                                    @if (meals != null && meals.Any())
                                    {
                                        <div class="meal-list">
                                            @foreach (var menu in meals)
                                            {
                                                <!-- Clean List Item Row -->
                                                <div class="meal-item-row" onclick="showDetails('@menu.MealItem.Name', '@menu.MealItem.Price', '@menu.MealItem.Category', '@menu.MealItem.Description')">
                                                    <div class="item-header">
                                                        <span class="item-name">@menu.MealItem.Name</span>
                                                        <span class="item-price">@menu.MealItem.Price</span>
                                                    </div>
                                                   
                                                </div>
                                            }
                                        </div>
                                    }
                                    else
                                    {
                                        <!-- Minimalist Empty State (Icon) -->
                                        <span class="no-food" title="Not Served">&bull;</span>
                                    }
                                </td>
                            }
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

<script>
    function showDetails(name, price, category, desc) {
        Swal.fire({
            title: name,
            html: `
                <div style="background:#f7fafc; padding:15px; border-radius:8px; margin-top:10px; text-align: left;">

                    <!-- Top Section: Price & Category -->
                    <div style="display:flex; justify-content:space-between; align-items:center; border-bottom: 1px dashed #cbd5e0; padding-bottom: 10px; margin-bottom: 10px;">
                        <div>
                            <div style="font-size:0.75rem; color:#718096; text-transform:uppercase; letter-spacing:0.5px;">Price</div>
                            <div style="font-size:1.2rem; font-weight:bold; color:#2f855a;">Rs. ${price}</div>
                        </div>
                        <div style="text-align:right;">
                            <div style="font-size:0.75rem; color:#718096; text-transform:uppercase; letter-spacing:0.5px;">Category</div>
                            <div style="font-size:1rem; font-weight:600; color:#4a5568;">${category || 'General'}</div>
                        </div>
                    </div>

                    <!-- Bottom Section: Description -->
                    <div>
                        <div style="font-size:0.75rem; color:#718096; text-transform:uppercase; letter-spacing:0.5px; margin-bottom: 4px;">Description</div>
                        <div style="color:#2d3748; font-size:0.95rem; line-height: 1.5;">
                            ${desc || 'No description available for this item.'}
                        </div>
                    </div>

                </div>
            `,
            confirmButtonText: 'OK',
            confirmButtonColor: '#5a67d8', // Your theme purple
        });
    }
</script>